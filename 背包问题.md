# 背包问题整合

以下是各种背包问题的核心区别及解决思路的清晰对比：

---

### **1. 0-1背包问题**

- **特点**：每个物品**只能选或不选**（选1次或不选）。

- **状态转移方程**：

  ```cpp
  dp[c] = max(dp[c], dp[c - w] + v)
  ```

  - 遍历顺序：**逆序**更新容量（防止重复选择）。

- **示例**：金条只能整根拿，不可切割。

---

### **2. 完全背包问题**

- **特点**：每个物品**可以选无限次**。

- **状态转移方程**：

  ```cpp
  dp[c] = max(dp[c], dp[c - w] + v)
  ```

  - 遍历顺序：**正序**更新容量（允许重复选择）。

- **示例**：金币可以无限拿取。

---

### **3. 多重背包问题**

- **特点**：每个物品**最多选`k`次**（给定数量限制）。
- **解决方法**：
  - **暴力拆分**：将`k`个物品视为`k`个独立物品（转为0-1背包）。
  - **二进制优化**：将`k`拆分为`1, 2, 4, ..., 2^m`的组合，减少物品数量。
- **示例**：电池每组3节，最多选3组。

---

### **4. 多维背包问题**

- **特点**：背包有**多个约束条件**（如体积、重量、时间等）。
- **状态定义**：`dp[c1][c2][...]` 表示满足多个约束时的最大价值。
- **示例**：背包限制体积≤10L、重量≤5kg，需同时满足。

---

### **5. 分组背包问题**

- **特点**：物品分为若干组，**每组最多选一个物品**。

- **解决思路**：

  ```cpp
  for (组内所有物品) {
      for (容量逆序) {
          dp[c] = max(dp[c], dp[c - w_i] + v_i)
      }
  }
  ```

- **示例**：菜单每组（饮料、主菜、甜点）各选一种。

---

### **6. 混合背包问题**

- **特点**：混合多种背包类型（如部分物品只能选1次，部分可无限选）。
- **解决思路**：对每类物品按类型处理：
  - 0-1背包：逆序更新容量。
  - 完全背包：正序更新容量。
  - 多重背包：二进制优化后处理。
- **示例**：旅行时，衣物可带多件（完全背包），但帐篷只能带1顶（0-1背包）。

---

### **7. 有依赖的背包问题**

- **特点**：物品间存在**依赖关系**（如选A必须先选B）。
- **解决思路**：
  - **树形依赖**：将依赖关系转化为树形结构，通过后序遍历处理子树。
  - **泛化物品**：将主件及其附件视为一个组合，枚举所有附件选择情况。
- **示例**：选电脑必须选电源适配器，选镜头必须先选相机机身。

---

### **对比表格**

| 问题类型     | 核心限制                   | 状态转移特点         | 时间复杂度         | 典型场景         |
| ------------ | -------------------------- | -------------------- | ------------------ | ---------------- |
| 0-1背包      | 物品只能选0或1次           | 容量逆序更新         | O(NC)              | 单次采购不可重复 |
| 完全背包     | 物品可无限选               | 容量正序更新         | O(NC)              | 原材料无限供应   |
| 多重背包     | 物品最多选k次              | 二进制优化拆分       | O(NC log K)        | 限量商品采购     |
| 多维背包     | 多维度约束（体积、重量等） | 多维状态数组         | O(NC1C2...)        | 多限制物流运输   |
| 分组背包     | 每组选一个物品             | 组内遍历后逆序更新   | O(NC)              | 套餐组合选择     |
| 混合背包     | 混合多种物品类型           | 分类处理不同物品     | 取决于混合类型     | 复杂采购需求     |
| 有依赖的背包 | 物品间存在依赖关系         | 树形DP或泛化物品组合 | O(NC + 依赖复杂度) | 设备配件依赖采购 |

---

### **解决思路总结**

1. **明确问题类型**：判断物品选择规则（次数限制、依赖关系等）。
2. **设计状态表示**：根据约束条件定义DP数组维度（如二维、三维）。
3. **状态转移优化**：
   - 0-1背包逆序更新，完全背包正序更新。
   - 多重背包使用二进制优化减少计算量。
   - 分组背包按组处理，依赖背包转化为子树或组合。
4. **空间优化**：使用滚动数组或压缩维度降低空间复杂度。

通过理解问题本质和状态转移逻辑，可灵活应对各类背包变种问题。
